---
title: 'Prepare Data'
author: 
output: 
  github_document:
    toc: yes
editor_options: 
  chunk_output_type: console
---

```{r "setup", include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE,
                      fig.align = "center",
                      fig.path=('../../report/figures/'))
library(printr)
options(digits = 2)
library(rmarkdown)
```

# Scripts
- [Required Packages &amp; Reproducibility](#required-packages-&amp;-reproducibility)
- [Tidy Data](#tidy-data)
- [Save Data for Analysis](#save-data-for-analysis)
- [Check Missing Values](#check-missing-values)
- [Visualization of Data](#visualization-of-data)
  - [Dependent Variable](#dependent-variable)
  - [Independent Variable](#independent-variable)
  - [Control Variables](#control-variables)
  - [Correlations Matrix](#correlations-matrix)

## Required Packages &amp; Reproducibility
```{r "env", message=FALSE, warning=F}
rm(list=ls())
source(here::here("src/lib/functions.R"))
renv::snapshot()
```

## Tidy Data
This code chuck downloads the data from Qualtrics using the API and cleans the raw data.

```{r "get data from Qualtrics", results="hide"}
source(here("src/data-processing/tidy_data.R"))
```

## Save Data for Analysis
```{r "save data"}
save(d, file = here("data/intermediate/cleaned_data.RData"))
```

## Check Missing Values

We employ the following criteria:

- If 10% or less of the values on the dimension are missing, then we re-code the missing values to the overall mean.
- If 11% or more of the values on the dimension are missing, then we re-code the missing values to a constant (for instance 0) and include a dummy variable indicating whether the response on the covariate was missing or not.

```{r "check missings"}

```

## Visualization of Data

### Dependent Variable
```{r "Dependent Variable", echo=F}
```

### Independent Variable
```{r "Independent Variables", echo=F, message=FALSE, warning=FALSE,fig.width=10, fig.height=10}

```


### Correlations Matrix
```{r "Correlations Matrix", echo=F, message=T, warning=T, fig.width=15, fig.height=15}

```
